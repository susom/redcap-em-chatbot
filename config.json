{
    "name": "REDCapChatBot",

    "namespace": "Stanford\\REDCapChatBot",

    "description": "A system-wide External Module to inject and manage frontend support chatbot functionality across all REDCap pages.",

    "documentation": "README.md",

    "authors": [
        {
            "name": "Irvin Szeto",
            "email": "irvins@stanford.edu",
            "institution": "Stanford University"
        }
    ],

    "framework-version": 9,

    "permissions": [
        "redcap_every_page_top",
        "redcap_module_system_enable"
    ],

    "enable-every-page-hooks-on-system-pages": true,

    "links": {
        "control-center": [

        ]
    },

    "no-auth-pages": [

    ],

    "auth-ajax-actions": [
        "callAI"
    ],

    "no-auth-ajax-actions": [],

    "system-settings": [
        {
            "key": "chatbot_system_context",
            "name": "Raw text to inject into system context",
            "required": false,
            "type": "textarea"
        },
        {
            "key": "redcap_actions_list",
            "name": "List of potential programatic actions Cappy can do",
            "required": false,
            "type": "textarea"
        },
        {
            "key": "chatbot_exclude_list",
            "name": "Comma delimited list of url fragments not to show Cappy on",
            "required": false,
            "type": "textarea"
        },
        {
            "key": "enable-system-debug-logging",
            "name": "<b>Enable Debug Logging (system-wide)</b><i>(optional)</i> Requires installation and configuration of emLogger",
            "required": false,
            "type": "checkbox"
        }
    ],

    "crons": [
        {
            "cron_name": "daily_context_pull",
            "cron_description": "This cron will run daily to look for new updated Context to add to the Support Context DB.",
            "method": "dailyCronRun",
            "cron_frequency": "86400",
            "cron_max_run_time": "3600"
        }
    ],

    "compatibility": {
        "php-version-min": "",
        "php-version-max": "",
        "redcap-version-min": "",
        "redcap-version-max": ""
    },

    "entities": {
        "chatbot_contextdb": {
            "label": "Context DB for Chatbot",
            "type": "object",
            "properties": {
                "title": {
                    "type": "string",
                    "label": "Title"
                },
                "raw_content": {
                    "type": "string",
                    "label": "Raw Content"
                },
                "tfidf_vector": {
                    "type": "string",
                    "label": "TF-IDF Vector"
                }
            }
        }
    }
}
